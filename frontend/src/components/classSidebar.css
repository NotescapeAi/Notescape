/* === Professional Sidebar (clean, accessible, responsive) === */
:root{
  --brand:  #7B5FEF;
  --accent: #5FEFC3;
  --danger: #EF5F8B;

  --panel:   #F7F8FC;
  --panel-2: #EEF2F7;
  --stroke:  #E4E7EC;

  --text:   #101828;
  --muted:  #475467;
  --ring:   rgba(123,95,239,.28);

  --sb-w:   300px;
  --sb-wc:   72px;

  --pad:    20px;
}

.sidebar{
  position:relative;
  z-index: 30; /* ADDED: keep menus above content */
  width:var(--sb-w);
  background:var(--panel);
  color:var(--text);
  display:flex;
  flex-direction:column;
  border-right:1px solid var(--stroke);
  transition: width .18s ease;
}
.sidebar.collapsed{ width:var(--sb-wc); }

/* collapse toggle */
.collapse-fab{
  position:absolute; top:50%; right:-14px; transform:translateY(-50%);
  width:28px; height:28px; border-radius:999px; border:1px solid var(--stroke);
  background:#fff; color:#344054; cursor:pointer;
  box-shadow:0 8px 20px rgba(16,24,40,.08);
}
.collapse-fab:hover{ background:#F8FAFC; }
.collapse-fab.is-collapsed{ right:-12px; }

/* header */
.sidebar-header{
  display:flex; align-items:center; gap:10px;
  padding:12px var(--pad);
  border-bottom:1px solid var(--stroke);
}
.title{ margin:0; font-weight:800; letter-spacing:.2px; font-size:20px; }
.count-pill{
  display:inline-flex; align-items:center; justify-content:center;
  height:22px; min-width:22px; padding:0 8px;
  font-size:12px; background:#fff; border:1px solid var(--stroke);
  color:#344054; border-radius:999px;
}
.back-only{
  width:32px; height:32px; display:grid; place-items:center;
  border-radius:8px; border:1px solid var(--stroke);
  background:#fff; color:#344054; text-decoration:none;
}
.back-only:hover{ background:#EEF2F7; }
.backicon{ width:18px; height:18px; }

/* search */
.search-row{ padding:8px var(--pad) 6px; border-bottom:1px solid var(--stroke); }
.search-wrap{
  display:flex; align-items:center; gap:8px;
  background:#fff; border:1px solid var(--stroke); border-radius:10px; padding:6px 8px;
}
.search-ic{ color:#98A2B3; }
.search-input{
  flex:1; height:28px; border:none; outline:none; background:transparent; color:var(--text);
}
.search-clear{
  border:none; background:transparent; color:#667085; cursor:pointer; border-radius:8px; padding:2px 6px;
}
.search-clear:hover{ background:#F2F4F7; }

/* list area */
.list{
  list-style:none; padding:8px var(--pad); margin:0;
  display:flex; flex-direction:column; gap:8px; overflow:auto;
  position: relative; /* optional safety */
  z-index: 1;
}
.list::-webkit-scrollbar{ width:8px; }
.list::-webkit-scrollbar-thumb{ background:#d7dbe3; border-radius:8px; }
.list::-webkit-scrollbar-thumb:hover{ background:#c8ced9; }

/* item */
.class-item{
  position:relative; border-radius:12px; background:transparent;
  /* overflow:hidden;  REMOVED: do not clip kebab menu */
  box-shadow: inset 0 0 0 1px transparent;
  transition: background .12s ease, box-shadow .12s ease, transform .12s ease;
}
.class-item:hover{ background:rgba(16,24,40,.04); }
.class-item.active{
  background:linear-gradient(0deg, rgba(255,255,255,.7), rgba(255,255,255,.7)), var(--panel-2);
  box-shadow: inset 0 0 0 1px var(--stroke), 0 4px 14px rgba(16,24,40,.06);
}

/* row body */
.item-body{
  display:flex; gap:10px; align-items:center; width:100%;
  text-align:left; cursor:pointer; padding:12px 44px 12px 12px;
  background:transparent; border:none; color:inherit; border-radius:12px;
}
.item-dot{
  width:8px; height:8px; border-radius:999px; background:transparent;
  box-shadow: inset 0 0 0 1px var(--stroke);
}
.class-item.active .item-dot{ background:var(--brand); box-shadow:none; }
.item-name{ font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* hover-only controls */
.item-kebab{
  position:absolute; top:8px; right:8px; width:28px; height:28px;
  display:grid; place-items:center; background:#fff; color:#344054;
  border:1px solid var(--stroke); border-radius:8px; opacity:0;
  transition: opacity .12s ease, transform .12s ease; cursor:pointer;
}
.class-item:hover .item-kebab{ opacity:1; }
.item-kebab:hover{ background:#F2F4F7; transform: translateY(-1px); }

/* kebab menu */
.kebab-menu{
  position:absolute; right:8px; top:40px;
  z-index:1000; /* RAISED so itâ€™s never clipped */
  min-width:168px;
  background:#FFFFFF; border:1px solid var(--stroke); border-radius:10px;
  box-shadow:0 12px 28px rgba(16,24,40,.14); padding:6px;
}
.kebab-menu>button{
  width:100%; text-align:left; padding:8px 10px; border:none; background:transparent;
  color:var(--text); border-radius:8px; cursor:pointer;
}
.kebab-menu>button:hover{ background:#F2F4F7; }
.kebab-menu>button.danger{ color:#B42318; }
.kebab-menu>button.danger:hover{ background:#FFE5EC; }

/* inline rename (compact, single line) */
.class-item.editing .item-body{ display:none; }
.class-item.editing .item-kebab{ display:none !important; }
.rename-inline{
  display:flex; align-items:center; gap:8px; padding:8px; background:transparent;
}
.rename-input{
  flex:1; height:36px; border-radius:10px;
  border:1px solid var(--stroke); padding:0 10px; background:#fff; color:var(--text);
}
.rename-input:focus{ outline:none; border-color:var(--brand); box-shadow:0 0 0 3px var(--ring); }
.rename-actions{ display:flex; gap:6px; }
.icon-btn{
  width:28px; height:28px; display:grid; place-items:center;
  border:1px solid var(--stroke); border-radius:8px;
  background:#fff; color:#344054; cursor:pointer;
}
.icon-btn.ok{ background:var(--brand); color:#fff; border-color:transparent; }
.icon-btn:disabled{ opacity:.6; cursor:default; }

/* add new row */
.add-cta-item{ margin-top:6px; padding:10px 0; border-top:1px dashed var(--stroke); }
.add-cta{
  width:100%; display:flex; align-items:center; gap:12px; background:transparent; border:none;
  color:var(--text); cursor:pointer; padding:8px 0; border-radius:10px;
}
.add-cta:hover{ background:#EEF2F7; }
.add-circle{ width:36px; height:36px; border-radius:50%; display:grid; place-items:center;
  background:#FFFFFF; color:#344054; font-weight:800; border:1px solid var(--stroke);
}
.add-circle.small{ width:28px; height:28px; font-size:14px; }
.add-label{ font-weight:600; letter-spacing:.2px; }
.add-inline{
  display:grid; grid-template-columns:36px 1fr auto auto; gap:8px; align-items:center;
}
.add-input{
  background:#FFFFFF; color:var(--text); border:1px solid var(--stroke); border-radius:10px; padding:8px 10px;
}
.add-input:focus{ outline:none; border-color:var(--brand); box-shadow:0 0 0 3px var(--ring); }
.btn{ border-radius:10px; padding:8px 12px; cursor:pointer; border:1px solid transparent; }
.btn.solid{ background:var(--brand); color:#fff; }
.btn.ghost{ background:transparent; color:var(--text); border-color:var(--stroke); }

/* empty state */
.empty-state{ padding:8px 0; }
.empty-card{
  border:1px dashed var(--stroke); background:#fff; border-radius:12px; padding:14px; text-align:center; color:#667085;
}
.empty-title{ font-weight:700; color:#101828; }
.empty-sub{ font-size:13px; }

/* collapsed tweaks */
.sidebar.collapsed .title{ display:none; }
.sidebar.collapsed .add-label{ display:none; }
.sidebar.collapsed .item-kebab{ display:none !important; }

/* === Collapsed rail polish === */
.sidebar.collapsed { width: var(--sb-wc); }

.sidebar.collapsed .list{
  padding: 8px 8px;
  align-items: center;
}

/* Avatar tile shown only when collapsed */
.item-avatar{ display:none; }
.sidebar.collapsed .item-avatar{
  display:grid;
  place-items:center;
  width:36px; height:36px;
  border-radius:10px;
  background:#FFFFFF;
  color:#344054;
  font-weight:800;
  border:1px solid var(--stroke);
  box-shadow:0 1px 0 rgba(16,24,40,.02);
}

/* Hide the dot and label when collapsed */
.sidebar.collapsed .item-dot{ display:none; }
.sidebar.collapsed .item-name{ display:none; }

/* Center the row, tighten padding */
.sidebar.collapsed .item-body{
  padding:8px;
  justify-content:center;
}

/* Active ring for the avatar tile */
.sidebar.collapsed .class-item.active .item-avatar{
  border-color: var(--brand);
  box-shadow: 0 0 0 3px var(--ring);
  color:#101828;
}

/* Hover lift */
.sidebar.collapsed .class-item:hover .item-avatar{
  transform: translateY(-1px);
}

/* Compact add button in collapsed mode */
.sidebar.collapsed .add-cta{
  justify-content:center;
  padding:6px;
}
.sidebar.collapsed .add-circle{
  box-shadow:0 1px 0 rgba(16,24,40,.02);
}

/* Keep the collapse pill nicely aligned on the rail */
.collapse-fab{ right:-12px; }
.collapse-fab.is-collapsed{ right:-10px; }
